var m_bjoo = require('BJOObject.js');
var _ = require('underscore');
var m_sql_lazyFieldLink = require('sql/lazyFieldLink.js');

function LazyFieldLinkManager() {
    m_bjoo.BJOObject.call(this);
    this._lazyFieldLinks = [];
}

function lazyFieldLinkManager() {
    return new LazyFieldLinkManager();
}

LazyFieldLinkManager.prototype = new m_bjoo.BJOObject();
LazyFieldLinkManager.prototype.constructor = LazyFieldLinkManager;

//======================================


LazyFieldLinkManager.prototype.addLink = function(/* m_sql_lazyFieldLink.LazyFieldLink */ lazyFieldLink) {
    /* @DEVELOPMENT { */
        if ( arguments.length !== 1 ) { throw new Error('Illegal argument length '  + arguments.length + ', should be ' + 1); }
        if ( !(lazyFieldLink instanceof m_sql_lazyFieldLink.LazyFieldLink) ) { throw new Error('Typecheck failure: lazyFieldLink should be of class m_sql_lazyFieldLink.LazyFieldLink: ' + lazyFieldLink); }
    /* @DEVELOMPENT } */
    this._lazyFieldLinks.push(lazyFieldLink);
};

LazyFieldLinkManager.prototype.apply = function() {
    _(this._lazyFieldLinks).each(function(l) {
        console.log('l', l);
        l.apply();
    }.bind(this));
};

//======================================

exports.LazyFieldLinkManager = LazyFieldLinkManager;
exports.lazyFieldLinkManager = lazyFieldLinkManager;
