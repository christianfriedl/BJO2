var m_bjoo = require('BJOObject.js');
var _ = require('underscore');
var util = require('util');
var m_sql_baseLazyFieldLink = require('sql/baseLazyFieldLink.js');

function LazyFieldLinkManager() {
    m_bjoo.BJOObject.call(this);
    this._links = [];
}

function lazyFieldLinkManager() {
    return new LazyFieldLinkManager();
}

LazyFieldLinkManager.prototype = new m_bjoo.BJOObject();
LazyFieldLinkManager.prototype.constructor = LazyFieldLinkManager;

//======================================


LazyFieldLinkManager.prototype.addLink = function(/* mixed */ link) {
    /* @DEVELOPMENT { */
        if ( arguments.length !== 1 ) { throw new Error('Illegal argument length '  + arguments.length + ', should be ' + 1); }
        if ( !(link instanceof m_sql_baseLazyFieldLink.BaseLazyFieldLink) ) { throw new Error('Typecheck failure: link should be of class m_sql_baseLazyFieldLink.BaseLazyFieldLink: ' + util.inspect(link)); }
    /* @DEVELOMPENT } */
    this._links.push(link);
};

LazyFieldLinkManager.prototype.apply = function() {
    _(this._links).each(function(l) {
        l.apply();
    }.bind(this));
};

//======================================

exports.LazyFieldLinkManager = LazyFieldLinkManager;
exports.lazyFieldLinkManager = lazyFieldLinkManager;
